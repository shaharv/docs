Docker tips
-----------

Basics:

- Build image                    sudo docker image build -t [image-name]:[version] .
- Run image                      sudo docker run -i -t uuid /bin/ash
- List available images          sudo docker images
- List running images            sudo docker ps
- Connect to running container   sudo docker exec -i -t [image-id] /bin/ash

Copy:

- Copy files from/to container   sudo docker cp <file-or-folder> <container-id>:<dest-folder>

Build and Deploy:

- Build squashed image           sudo docker image build --squash -t <image-name> .
  (requires experimental mode)
- Commit image                   sudo docker commit <container-id> <image-id>[:tag]

Cleanup:

- Delete all containers          sudo docker rm $(sudo docker ps -a -q)
- Delete all images              sudo docker rmi $(sudo docker images -q)

Inspect:

- List all files in container    sudo docker export <container-id> | tar tfv -
- Get container IP address       sudo docker inspect <container-id> | grep IPAddress

Debug:

- Run gdb capable docker         sudo docker run --cap-add=SYS_PTRACE --security-opt seccomp=unconfined

Misc:

- Enable experimental features   echo $'{\n    "experimental": true\n}' | sudo tee -a /etc/docker/daemon.json
                                 sudo service docker restart
